<!DOCTYPE html>
<html lang="">
    <head>
        <title>(ch 22) Infinite Probability</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="bear-note-unique-identifier" content="04B76FFF-0F4E-4628-976A-01274781752D">
        <meta name="created" content="2022-12-05T17:53:39-0600">
        <meta name="modified" content="2023-07-24T23:37:45-0500">
        <meta name="tags" content="_book/Art, _book/Art/game/GameBalance/Math, _book, _book/Art/game, _book/Art/game/GameBalance">
        <meta name="last device" content="xiaoquan’s MacBook Pro">
        
        <style>
             body {
   --base-background-color: #ffffff;
   --document-background-color: var(--base-background-color);
 }

.document-wrapper {
  /* Constants used to transform theme values to CSS */
  --transform-line-height-factor: 1.17;

  /* From template */
  --base-text-color: #444444;
  --base-text-secondary-color: #888888;
  --base-text-tertiary-color: #d9d9d9;
  --base-background-color: #ffffff;
  --base-background-secondary-color: #F3F5F7;
  --base-background-tertiary-color: #E4E5E6;
  --base-stroke-color: #d9d9d9;
  --base-stroke-secondary-color: #d9d9d9;
  --base-accent-color: #DD4C4F;
  --base-highlight-color: ;

  --document-background-color: var(--base-background-color);
  --document-text-color: var(--base-text-color);
  --document-text-secondary-color: var(--base-text-secondary-color);
  --document-text-light-color: var(--base-text-secondary-color);
  --document-accent-color: var(--base-accent-color);
  --document-cursor-color: var(--base-accent-color);
  --document-link-color: var(--base-accent-color);
  --document-list-marker-color: var(--base-accent-color);
  --document-marker-color: var(--base-text-tertiary-color);
  --document-selection-color: var(--base-selection-color);
  --document-selection-inactive-color: var(--base-background-tertiary-color);
  --document-text-font: "AvenirNext-Regular";
  --document-text-size: 15px;
  --document-line-height-multiplier: calc(
    1.5 * var(--transform-line-height-factor)
  );

  --document-headers-text-color: var(--base-text-color);
  --document-headers-font: "AvenirNext-Medium";
  --document-headers-modular-scale: 1.125;
  --document-headers-line-height-multiplier: calc(
    1.3 * var(--transform-line-height-factor)
  );
  --document-headers-add-top-bottom-padding: 1;
  --document-headers-padding-top-multiplier: 0.5;
  --document-headers-padding-bottom-multiplier: 0.3;

  --document-code-text-color: var(--base-text-color);
  --document-code-border-color: var(--base-text-tertiary-color);
  --document-code-background-color: var(--base-background-secondary-color);
  --document-code-font: "Menlo-Regular";
  --document-code-text-size-multiplier: 0.91em;

  --document-code-syntax-highlight-comment: #65798c;
  --document-code-syntax-highlight-constant: #0095c9;
  --document-code-syntax-highlight-number: #0095c9;
  --document-code-syntax-highlight-string: #d12f1b;
  --document-code-syntax-highlight-entity: #4a838b;
  --document-code-syntax-highlight-keyword: #ad3da4;
  --document-code-syntax-highlight-function: #4a838b;
  --document-code-syntax-highlight-variable: #4a838b;

  --document-task-background-color: var(--base-background-color);
  --document-task-border-color: var(--base-text-secondary-color);
  --document-task-check-color: var(--base-text-color);

  --document-tag-background-color: var(--base-background-tertiary-color);
  --document-tag-text-color: var(--base-text-color);
  --document-tag-marker-color: var(--base-text-secondary-color);

  --document-highlighter-background-color: #CDF7BD;
  --document-highlighter-text-color: #102D05;

  --document-highlighter-red-background-color: #FED09F;
  --document-highlighter-red-text-color: #321A00;

  --document-highlighter-blue-background-color: #C9E5FF;
  --document-highlighter-blue-text-color: #001A32;

  --document-highlighter-green-background-color: #CDF7BD;
  --document-highlighter-green-text-color: #102D05;

  --document-highlighter-purple-background-color: #FEDAFF;
  --document-highlighter-purple-text-color: #310032;

  --document-highlighter-yellow-background-color: #FCF195;
  --document-highlighter-yellow-text-color: #312C01;
  
  --document-file-fold-color: var(--base-background-tertiary-color);
  --document-file-background-color: var(--base-background-secondary-color);

  --document-separator-border-color: var(--base-stroke-secondary-color);

  --document-table-border-color: var(--base-stroke-secondary-color);
  --document-table-cell-background-color: var(--base-background-color);
  --document-table-cell-alternate-background-color: var(
    --base-background-secondary-color
  );
}

.document-wrapper,body{background-color:var(--document-background-color)}.document-wrapper h1.setext,.document-wrapper h2.setext{border-bottom:calc(2 * var(--document-hairline-width)) solid var(--document-separator-border-color);padding-bottom:.6em}.document-wrapper blockquote blockquote blockquote blockquote blockquote::before,.document-wrapper blockquote blockquote blockquote::before,.document-wrapper blockquote::before{background-color:var(--document-list-marker-color)}.document-wrapper td[data-alignment="1"],.document-wrapper th{text-align:left}.document-wrapper :after,.document-wrapper :before,.document-wrapper a,.document-wrapper abbr,.document-wrapper acronym,.document-wrapper address,.document-wrapper applet,.document-wrapper article,.document-wrapper aside,.document-wrapper audio,.document-wrapper b,.document-wrapper big,.document-wrapper blockquote,.document-wrapper canvas,.document-wrapper caption,.document-wrapper center,.document-wrapper cite,.document-wrapper code,.document-wrapper dd,.document-wrapper del,.document-wrapper details,.document-wrapper dfn,.document-wrapper div,.document-wrapper dl,.document-wrapper dt,.document-wrapper em,.document-wrapper embed,.document-wrapper fieldset,.document-wrapper figcaption,.document-wrapper figure,.document-wrapper footer,.document-wrapper form,.document-wrapper h1,.document-wrapper h2,.document-wrapper h3,.document-wrapper h4,.document-wrapper h5,.document-wrapper h6,.document-wrapper header,.document-wrapper hgroup,.document-wrapper i,.document-wrapper iframe,.document-wrapper ins,.document-wrapper kbd,.document-wrapper label,.document-wrapper legend,.document-wrapper li,.document-wrapper mark,.document-wrapper menu,.document-wrapper nav,.document-wrapper object,.document-wrapper ol,.document-wrapper output,.document-wrapper p,.document-wrapper pre,.document-wrapper q,.document-wrapper ruby,.document-wrapper s,.document-wrapper samp,.document-wrapper section,.document-wrapper small,.document-wrapper span,.document-wrapper strike,.document-wrapper strong,.document-wrapper summary,.document-wrapper table,.document-wrapper tbody,.document-wrapper td,.document-wrapper tfoot,.document-wrapper th,.document-wrapper thead,.document-wrapper time,.document-wrapper tr,.document-wrapper tt,.document-wrapper u,.document-wrapper ul,.document-wrapper var,.document-wrapper video{all:unset}.document-wrapper{--document-inline-padding-top-bottom:0.25em;--document-inline-padding-left-right:0.25em;--header-1-font-size:2em;--header-2-font-size:1.6em;--header-3-font-size:1.27em;--document-hairline-width:calc(var(--document-text-size) / 15);box-sizing:border-box;color:var(--document-text-color);font-family:var(--document-text-font);font-size:var(--document-text-size);line-height:var(--document-line-height-multiplier);min-height:100%;max-width:48em;width:100%;tab-size:4;margin:0 auto;padding:0 2em}body{text-rendering:optimizeLegibility}.document-wrapper:focus-visible{outline:0}.document-wrapper .marker{color:var(--document-marker-color);display:none}.document-wrapper [data-direction="2"]{direction:rtl}.document-wrapper div.footnote,.document-wrapper div.link-definition,.document-wrapper p{display:block}.document-wrapper p.blank-line::before{content:" "}.document-wrapper h1,.document-wrapper h2,.document-wrapper h3,.document-wrapper h4,.document-wrapper h5,.document-wrapper h6{font-family:var(--document-headers-font);display:block;line-height:var(--document-headers-line-height-multiplier)}.document-wrapper h1{font-size:var(--header-1-font-size);padding-block-start:0.8em;padding-block-end:0.33em}.document-wrapper h2{font-size:var(--header-2-font-size);padding-block-start:0.66em;padding-block-end:0.27em}.document-wrapper h3{font-size:var(--header-3-font-size);padding-block-start:0.53em;padding-block-end:0.27em}.document-wrapper code,.document-wrapper pre{font-size:var(--document-code-text-size-multiplier);font-family:var(--document-code-font),monospace}.document-wrapper h4,.document-wrapper h5,.document-wrapper h6{padding-block-start:0.4em;padding-block-end:0.27em}.document-wrapper h1.setext{margin-bottom:.45em}.document-wrapper h2.setext{margin-bottom:.2em}.document-wrapper .fenced-code *,.document-wrapper .fenced-code-content .marker,.document-wrapper .fenced-code-content .space,.document-wrapper .hard-linebreak-marker,.document-wrapper .image .space,.document-wrapper .image-destination,.document-wrapper .image-label,.document-wrapper .image-title,.document-wrapper .indented-code .space,.document-wrapper .link .space,.document-wrapper .link-destination,.document-wrapper .link-label,.document-wrapper .link-title,.document-wrapper .replace .text,.document-wrapper .setext-heading-marker+.line-ending,.document-wrapper .yaml-marker+.line-ending,.document-wrapper li>p>.space:first-child,.document-wrapper tr.delimiter-row{display:none}.document-wrapper ol,.document-wrapper ul{display:block;padding-inline-start:2.13em}.document-wrapper li{display:list-item;color:var(--document-text-color)}.document-wrapper .color-marker,.document-wrapper .entity-marker,.document-wrapper .fenced-code-content,.document-wrapper .fenced-code-content *,.document-wrapper .footnote-separator,.document-wrapper .link-definition-separator,.document-wrapper code.code-inline,.document-wrapper li>p{display:inline}.document-wrapper ul{list-style-type:disc}.document-wrapper li li li li li li li ul,.document-wrapper li li li li li ul,.document-wrapper li li li ul,.document-wrapper li ul{list-style:circle}.document-wrapper li li li li li li ul,.document-wrapper li li li li ul,.document-wrapper li li ul{list-style:disc}.document-wrapper li::marker{color:var(--document-list-marker-color)}.document-wrapper ol{list-style-type:none;counter-reset:custom-list-item calc(var(--data-list-start,1) - 1)}.document-wrapper ol>li{counter-increment:custom-list-item;position:relative}.document-wrapper ol>li::before{content:counter(custom-list-item) ". ";color:var(--document-list-marker-color);position:absolute;transform:translate(calc(-100% - .33em),0)}.document-wrapper ol>li[data-big-number=true]{margin-inline-start:-2.05em}.document-wrapper ol>li[data-big-number=true]::before{position:static;padding-inline-end:0.25em}.document-wrapper ol>li[data-list-type="1"]:before{content:counter(custom-list-item) ") "}.document-wrapper [data-direction="2"] ol>li::before,.document-wrapper ol[data-direction="2"]>li::before{transform:translate(calc(100% + .33em),0)}.document-wrapper li[role=checkbox]{list-style:none;position:relative}.document-wrapper li[aria-checked=true]{color:var(--document-text-secondary-color)}.document-wrapper .todo-checkbox{display:inline-block;margin-left:-1.7em;margin-right:.5em}.document-wrapper .todo-checkbox svg{display:inline-block;margin-bottom:-.3em}.document-wrapper blockquote{display:block;padding-inline-start:2.13em;position:relative}.document-wrapper code,.document-wrapper mark,span.highlighted{padding:var(--document-inline-padding-top-bottom) var(--document-inline-padding-left-right)}.document-wrapper blockquote::before{content:"";position:absolute;top:.2em;left:1em;width:.13em;height:calc(100% - .4em);border:var(--document-hairline-width) solid var(--document-list-marker-color);border-radius:.33em}.document-wrapper code,.document-wrapper pre.fenced-code,.document-wrapper pre.indented-code,.document-wrapper pre.yaml{color:var(--document-code-text-color);background-color:var(--document-code-background-color);border-radius:.25em}.document-wrapper [data-direction="2"] blockquote::before,.document-wrapper blockquote[data-direction="2"]::before{left:0;right:1em}.document-wrapper blockquote blockquote blockquote blockquote blockquote blockquote::before,.document-wrapper blockquote blockquote blockquote blockquote::before,.document-wrapper blockquote blockquote::before{background-color:transparent}.document-wrapper hr{display:block;margin-block-start:calc(var(--document-line-height-multiplier) * 0.5em);margin-block-end:calc(var(--document-line-height-multiplier) * -0.5em);border-top:var(--document-hairline-width) solid var(--document-separator-border-color)}.document-wrapper pre{display:block;white-space:pre-wrap}.document-wrapper pre.indented-code{padding-inline-start:2.13em}.document-wrapper pre.fenced-code,.document-wrapper pre.yaml{padding:0 .5em}.document-wrapper .fenced-code::before{content:"\200B"}.document-wrapper code{font-weight:400;font-style:normal;display:block}.document-wrapper mark code{color:var(--document-text-color);background-color:var(--document-highlighter-background-color)}.document-wrapper em,.document-wrapper i{font-family:AvenirNext-Italic}.document-wrapper b,.document-wrapper strong,.document-wrapper th{font-family:AvenirNext-Bold}.document-wrapper mark,span.highlighted{color:var(--document-highlighter-background-text-color);background-color:var(--document-highlighter-background-color);text-decoration:inherit;unicode-bidi:embed;border-radius:.25em}.document-wrapper mark.red,span.highlighted.red{color:var(--document-highlighter-red-background-text-color);background-color:var(--document-highlighter-red-background-color)}.document-wrapper mark.blue,span.highlighted.blue{color:var(--document-highlighter-blue-background-text-color);background-color:var(--document-highlighter-blue-background-color)}.document-wrapper mark.green,span.highlighted.green{color:var(--document-highlighter-green-background-text-color);background-color:var(--document-highlighter-green-background-color)}.document-wrapper mark.yellow,span.highlighted.yellow{color:var(--document-highlighter-yellow-background-text-color);background-color:var(--document-highlighter-yellow-background-color)}.document-wrapper mark.purple,span.highlighted.purple{color:var(--document-highlighter-purple-background-text-color);background-color:var(--document-highlighter-purple-background-color)}.document-wrapper u{text-decoration:underline;text-decoration-color:var(--document-accent-color);unicode-bidi:embed}.document-wrapper s,.document-wrapper strike{text-decoration:line-through}.document-wrapper a{color:var(--document-link-color);unicode-bidi:embed;cursor:pointer}.document-wrapper a:hover{text-decoration:inherit}.document-wrapper .wiki-separator-marker{display:inline;color:inherit}.document-wrapper .link-definition-title{color:var(--document-text-light-color)}.document-wrapper .footnote-ref{font-size:.9em;vertical-align:super}.document-wrapper span.entity{direction:ltr;unicode-bidi:embed;color:var(--document-code-syntax-highlight-entity)}.document-wrapper span.escape{unicode-bidi:embed}.document-wrapper .color{font-family:var(--document-code-font),monospace;font-size:var(--document-code-text-size-multiplier);padding-inline-start:1.2em;position:relative;direction:ltr;unicode-bidi:embed}.document-wrapper .color::before{content:"";position:absolute;width:.9em;height:.9em;left:0;bottom:0;transform:translateY(-15%);border:var(--document-hairline-width) solid rgb(0,0,0,.3);border-radius:.9em;background-color:var(--data-color)}.document-wrapper .hashtag{color:var(--document-tag-text-color);background-color:var(--document-tag-background-color);border-radius:1em;padding:calc(var(--document-inline-padding-top-bottom) - 2 * var(--document-hairline-width)) calc(var(--document-inline-padding-left-right) + .3em);unicode-bidi:embed}.document-wrapper .hashtag>.marker{display:inline;color:var(--document-tag-marker-color);padding:0}.document-wrapper table{display:block;max-width:fit-content;overflow-x:auto;border-collapse:separate;border-spacing:0;border:var(--document-hairline-width) solid var(--document-table-border-color);border-radius:.33em;margin-bottom:calc(var(--document-line-height-multiplier) * 1em)}.document-wrapper table[data-direction="2"]{margin-left:auto;direction:ltr}.document-wrapper tr{display:table-row;background-color:var(--document-table-cell-background-color)}.document-wrapper tr.header-row,.document-wrapper tr:nth-child(odd){background-color:var(--document-table-cell-alternate-background-color)}.document-wrapper td,.document-wrapper th{box-sizing:border-box;display:table-cell;padding:.37em .75em;min-width:5em;border-right:var(--document-hairline-width) solid var(--document-table-border-color)}.document-wrapper td:last-of-type,.document-wrapper th:last-of-type{border:none}.document-wrapper table[data-direction="2"] td{margin-left:auto}.document-wrapper td[data-alignment="2"]{text-align:right}.document-wrapper td[data-alignment="3"]{text-align:center}.document-wrapper .code_comment{color:var(--document-code-syntax-highlight-comment)}.document-wrapper .code_constant{color:var(--document-code-syntax-highlight-constant)}.document-wrapper .code_number{color:var(--document-code-syntax-highlight-number)}.document-wrapper .code_string{color:var(--document-code-syntax-highlight-string)}.document-wrapper .code_entity{color:var(--document-code-syntax-highlight-entity)}.document-wrapper .code_keyword{color:var(--document-code-syntax-highlight-keyword)}.document-wrapper .code_function{color:var(--document-code-syntax-highlight-function)}.document-wrapper .code_variable{color:var(--document-code-syntax-highlight-variable)}.document-wrapper img{max-width:100%}.document-wrapper .pdf_preview{display:inline-block;width:100%;height:500px;background-color:#fff;overflow:hidden;padding:0;margin:0;position:relative;border-radius:4px}.document-wrapper .arrow svg #body,.document-wrapper .arrow svg #head{fill:var(--base-text-color)}.document-wrapper .todo-checkbox svg #body{stroke:var(--document-task-border-color)}.document-wrapper .todo-checkbox svg #check{fill:var(--document-task-check-color)}.document-wrapper .todo-checkbox.todo-checked svg #body{opacity:.35}.document-wrapper .todo-checkbox.todo-checked svg #check{opacity:.4}

        </style>
    </head>
    <body>
        <div class="document-wrapper">
            <h1 id='(ch 22) Infinite Probability'>(ch 22) Infinite Probability</h1><br>
<h1 id='Table of Contents'>Table of Contents</h1><ul>
<li><a href='bear://x-callback-url/open-note?id=04B76FFF-0F4E-4628-976A-01274781752D&header=Mordenkainen%E2%80%99s%20Magical%20Rubber%20Band'>Mordenkainen’s Magical Rubber Band</a></li>
<li><a href='bear://x-callback-url/open-note?id=04B76FFF-0F4E-4628-976A-01274781752D&header=State%20machine%20to%20matrix'>State machine to matrix</a></li>
<li><a href='bear://x-callback-url/open-note?id=04B76FFF-0F4E-4628-976A-01274781752D&header=Discussion%20Questions'>Discussion Questions</a></li>
<li><a href='bear://x-callback-url/open-note?id=04B76FFF-0F4E-4628-976A-01274781752D&header=Side-quests'>Side-quests</a>
<ul>
<li><a href='bear://x-callback-url/open-note?id=04B76FFF-0F4E-4628-976A-01274781752D&header=Side-quest%2022.1%3A%20Thunderstorm'>Side-quest 22.1: Thunderstorm</a></li>
<li><a href='bear://x-callback-url/open-note?id=04B76FFF-0F4E-4628-976A-01274781752D&header=Side-quest%2022.2%3A%20Hi%20Ho%21%20Chery-O'>Side-quest 22.2: Hi Ho! Chery-O</a></li>
<li><a href='bear://x-callback-url/open-note?id=04B76FFF-0F4E-4628-976A-01274781752D&header=Side-quest%2022.3%3A%20Mordenkainen%E2%80%99s%20Magical%20Rubber%20Band'>Side-quest 22.3: Mordenkainen’s Magical Rubber Band</a></li>
<li><a href='bear://x-callback-url/open-note?id=04B76FFF-0F4E-4628-976A-01274781752D&header=Side-quest%2022.4%3A%20Kill%20the%20Elf%20as%20a%20State%20Machine'>Side-quest 22.4: Kill the Elf as a State Machine</a></li>
<li><a href='bear://x-callback-url/open-note?id=04B76FFF-0F4E-4628-976A-01274781752D&header=Side-quest%2022.5%3A%20Horse%20Race%2C%20Exact%20Solution'>Side-quest 22.5: Horse Race, Exact Solution</a></li>
<li><a href='bear://x-callback-url/open-note?id=04B76FFF-0F4E-4628-976A-01274781752D&header=Side-quest%2022.6%3A%20Two%20in%20a%20Row'>Side-quest 22.6: Two in a Row</a></li>
</ul>
</li>
</ul><br>
<hr><br>
<br>
<h2 id='Mordenkainen’s Magical Rubber Band'>Mordenkainen’s Magical Rubber Band</h2><ul>
<li><i>First-Level Spell</i>
<ul>
<li>Choose a target. The target takes 1 damage. Then, roll 1d10. On a 1 or 2, the spell ends. Otherwise, the target takes an additional 1 damage, and you roll again. Continue rolling in this way until you roll a 1 or 2.</li>
<li>It could potentially do an <b>infinite</b> amount of damage</li>
</ul>
</li>
</ul><br>
<h2 id='State machine to matrix'>State machine to matrix</h2><p><img src='(ch%2022)%20Infinite%20Probability/AB31070C-7598-4D04-B279-46BB7EC84F7B.png'><br>
<img src='(ch%2022)%20Infinite%20Probability/65EF5EC5-BE9C-4021-A50D-214D2D83D336.png'></p><br>
<ul>
<li>Start with [1,0,0], after 13 or 14 operation</li>
</ul><br>
<p><img src='(ch%2022)%20Infinite%20Probability/C51E4F98-9F6E-4E23-B685-FE299487DCEA.png'></p><ul>
<li>A <b>steady state</b></li>
</ul><br>
<h2 id='Discussion Questions'>Discussion Questions</h2><ol start='1' style='--data-list-start: 1;'>
<li>Create a custom five-state FSM, labeling all states and transitions, mark- ing the initial state and (if any) final states, and the probabilities for each transition. This can be anything you want, for a real or imagined game system. Separately, describe in plain language what’s going on.</li>
<li>For the FSM you created in the previous question, convert it to a transition matrix. (If you are going through this book in a group or a class, trade your FSM with a partner and create the transition matrix for someone else’s FSM.)</li>
<li>For the transition matrix created in the previous question, use a Markov chain to determine how likely a player will be in any given state over time. Note particular points of interest, such as if/when it reaches a steady state, or when you pass a 50% chance of reaching a final state.</li>
<li>Consider this game: you can bet $1 and then flip a fair coin. If the coin lands on heads, you lose your bet. If the coin lands on tails, your bet is tripled and you can either walk away (keeping your bet) or flip again. You can only play once, ever. Model this as an infinite state machine.</li>
<li>For the game in the previous question, use a Markov chain to track the expected winnings. What do you find as the coin is flipped more?</li>
<li>For the game in the previous two questions, the expected value for flipping again is always positive, suggesting that it’s always in the player’s favor to flip again and never stop. But of course, if a player continues flipping the coin, they will eventually flip heads and lose everything. If you were playing this game, how would you resolve this paradox? That is, when would you stop flipping, and why?</li>
<li>Think of any game you’ve played that has at least one system or mechanic that could be analyzed using the techniques in this chapter. What’s the game?</li>
<li>For the game you mentioned in the previous question, come up with a specific problem you could solve. For example, you might ask about the average number of turns to complete a task, or the average payoff to a particular action in the game.</li>
<li>For the problem you identified in the previous question, set up a model of the problem, such as a state machine and transition matrix.</li>
<li>Using the tools from the previous question, solve the problem and find your answer.</li>
</ol><br>
<h2 id='Side-quests'>Side-quests</h2><h3 id='Side-quest 22.1: Thunderstorm'>Side-quest 22.1: Thunderstorm</h3><ul>
<li>/Thunderstorm/is a traditional children’s dice game that originated in Germany. The original game is played as follows:
<ul>
<li><b>Number of players</b>: 2 or more, no upper limit.</li>
<li><b>Objective</b>: be the last player to be eliminated (last one standing).</li>
<li><b>Setup</b>: determine a player to go first. That player takes 6d6.</li>
<li>On the first player’s turn, that player rolls all 6d6 (on subsequent turns, players may roll fewer dice). After rolling,</li>
<li>If at least one of the dice rolled shows a 1, set aside all dice showing 1s, and pass the remaining dice to the next player in turn order.</li>
<li>If /all/of the dice rolled are 1s, pass those dice /and all dice formerly set aside/to the next player in turn order. That player rolls all six dice on their turn.</li>
<li>If /none/of the dice rolled are 1s, the player who rolled gets one strike against them. All dice that were rolled (but none that were formerly set aside) are passed to the next player. When a player gets six strikes against them, they are eliminated from the game and no longer roll dice or take turns.</li>
</ul>
</li>
<li>Go ahead and play this game if you’ve never played before, in a small group. You will see that the game plays fairly quickly. Starting out, it is fairly easy to roll at least one 1 on 6d6, so the first player to roll is usually safe. But as players succeed in rolling 1s, the dice pool gets smaller and players start fail- ing their rolls regularly. Once there is only one single die remaining, there are about four failures on average before someone finally rolls 1 and brings all of the dice back into play.
<ul>
<li>At that point, the next players to roll feel some relief, as they’re rolling many dice and be safe again, for the time being. /Thunderstorm/provides a surprising amount of rising and falling tension, and good pacing (which we examine in Chapter 12), considering the simplicity of its rules and the lack of any player choices.</li>
</ul>
</li>
<li>You might wonder: how long does a single game take?</li>
<li>Assume a single-player version of this game. Keep playing until receiving six strikes. A player’s “score” is the total number of die rolls made before being eliminated. Use a Markov chain to find the mean, median, and mode score for a single player. This can be modeled as a state machine, where each state is a unique combination of how many strikes the player has received (0 to 5), and how many dice are being rolled (1 to 6), plus one final state (six strikes received, and the number of dice are irrelevant because the game is over).</li>
<li><b>Alternate challenge</b>: instead of a single player, model the game as a state machine that only examines the number of dice being rolled on each turn. Find the steady state, and how many turns it takes to get there. Also calculate the probability of failing a roll for each of the six states. Multiply the failure probability by the probability of being in that state. Add those together to get the probability of a failure (“strike”) on any given turn.</li>
</ul><br>
<p>Now, let’s make the simplifying assumption that in a multiplayer game, each player has an equal probability of getting a strike (this is not strictly accurate, since the first player is rolling 6d6 on the first turn and thus would be expected to have a slightly different probability than the other players in sequence). Players continue to accumulate strikes until they are eliminated, so the total number of strikes in an <i>N</i>-player game is going to be somewhere between 6 * (/N/−1) and 6 * (/N/−1)+5, because all but one player has six strikes at the end (elimination) and the winning (non-eliminated) player has somewhere between zero and five strikes. Using this range, come up with a range of average die rolls.</p><ul>
<li><b>Greater challenge</b>: extend the alternate challenge above: using any technique you can, find the expected value of the number of strikes in an <i>N</i>-player game. Multiply <i>that/by the probability of a strike in steady state to get expected number of turns in a game, in terms of /N</i>.</li>
<li><b>Ultimate challenge</b>: examine the first-player advantage (or disadvantage) in a two-player game. Here, you need to consider not only the steady state in the long term, but also the initial rolls before steady state has been established. In the Markov chain, calculate the probabilities of a strike for all odd turns and all even turns, and keep track of the cumulative number of expected strikes for each player. Which player’s probability of losing crosses 50% first?</li>
</ul><br>
<p>Do the same for a three-player game, and a four-player game, and five- player, and so on. Do you see any patterns emerging, in terms of which position in turn order is the most (or least) favorable?</p><br>
<h3 id='Side-quest 22.2: Hi Ho! Chery-O'>Side-quest 22.2: Hi Ho! Chery-O</h3><p>This children’s game with a theme of picking cherries from trees can be<br>
described, abstractly, as follows:</p><ul>
<li><b>Players</b>: 2 or more</li>
<li><b>Objective</b>: be the first player to reach at least 10 points</li>
<li><b>Setup</b>: all players begin the game with 0 points. Choose a player to go first.</li>
<li><b>Play</b>: on a player’s turn, they spin a spinner that produces one of seven equally likely results (equivalent to rolling 1d7). The results are: gain 1 point; gain 2 points; gain 3 points; gain 4 points; lose 1 point; lose 2 points; or reset their score to 0.</li>
<li>Let us first consider the single-player case. For one player, this can be modeled as a state machine with 11 states (scores of 0–9, and then a final state that contains all scores of 10 or above). Using Markov chains, calculate the mean, median, and mode turns it takes a single player to complete the game. Graph the probability curve of the probability of ending the game on the <i>y</i>-axis, and the turn number on the <i>x</i>-axis, up to 100 turns.</li>
<li><b>Greater challenge</b>: use a Monte Carlo simulation to find the average game length for a four-player game.</li>
<li><b>Ultimate challenge</b>: suppose you want to change the game to a median game length of ten turns for the single-player case. Without changing the mechanics of the seven spinner results, modify the probabilities of each spinner space (so that players are rolling a /weighted/d7, essentially) to get the median game length as close to exactly ten turns as you can. You need to restructure your spreadsheet so that you can enter weights in a series of cells, and the Markov chain calculations must take these weights into account. Then, play around with the weights by hand, or use a Solver to optimize.</li>
<li>Repeat this challenge, but you must keep the weights as even (you are now rolling a fair 1d7) but modify the mechanics, instead. Each of the seven spaces must determine the state transition, through any means that occurs to you (it might add or subtract points, set a player’s score to any constant value, or even transition to the same state as a “null” move—anything that can be modeled in a state diagram). Modify the values of these spaces and, again, try to get the median game length down to 10 as above.</li>
<li>Which of these two methods was easier? Did you find it more challenging to tweak the probabilities, or change the core mechanics?</li>
</ul><br>
<h3 id='Side-quest 22.3: Mordenkainen’s Magical Rubber Band'>Side-quest 22.3: Mordenkainen’s Magical Rubber Band</h3><ul>
<li>Consider that magic spell at the start of this chapter: it does 1 damage, with an 80% probability of doing +1 damage (repeating until the player fails the die roll). Calculate the expected value of damage from this spell using a Markov chain. Since this is an infinite state machine, just consider the first couple hundred states (anything after that amounts to a rounding error).</li>
<li>Repeat the calculation as a Monte Carlo simulation to verify your answer.</li>
<li><b>Alternate challenge</b>: You can also solve this algebraically. This can be modeled as a sequence of probabilities, where damage <i>D//n/= 1 + 0.8 * /D//n/+1. In this particular case, since this holds true for every state (each state is the same as every other), /D//n/= /D//n/+1, which means you can reduce the equation to /D/= 1 + 0.8 * /D</i>. Solve this simple equation for the damage, and confirm that it gives the same answer as the other two methods above.</li>
</ul><br>
<h3 id='Side-quest 22.4: Kill the Elf as a State Machine'>Side-quest 22.4: Kill the Elf as a State Machine</h3><ul>
<li>In Chapter 17, we examined a game called <i>Kill the Elf</i>. It is a two-player game. One player (the warrior) does 1 damage per turn; the other player (the wizard) rolls 1d6 and has a 1/6 probability of doing 6 damage per turn, and a 5/6 probability of doing no damage.
<ul>
<li>The expected values of these are the same in the long term, but in the short term, we found that a race to 6 damage greatly favors the wizard. Challenge 17.2 asked to compute the probability of a win if racing to 4 damage or 10. But what if we wanted to find the amount of damage that gave the closest to 1:1 odds of the warrior and wizard winning, for any values between 1 and 1000? That could potentially get quite unwieldy if we just used our standard probability tools.</li>
</ul>
</li>
<li>But we can model this as a state machine, where the state is the number of times the wizard hits:</li>
</ul><br>
<p><img src='(ch%2022)%20Infinite%20Probability/31DF2FE9-687E-452E-827F-A9564DF777F2.png'></p><ul>
<li>This becomes a fairly simple transition matrix. Construct that matrix, and use an initial column vector that shows a probability 1 of starting in state 0. Using a Markov chain, you can then determine, for any number of turns, the probability breakdown of what state the player is in (multiply by 6 to get the amount of damage done so far). For any given turn, you can see the prob- ability of doing any amount of damage (keeping in mind that on turn <i>n</i>, the warrior has done exactly /n/damage).</li>
<li>What trends do you see as the amount of required damage increases? Between 1 and 1000, what value gives the odds that are closest to 1:1 (even chance of the warrior or wizard winning, i.e., the smallest absolute difference between the expected win rate of the wizard and 50%)?</li>
</ul><br>
<h3 id='Side-quest 22.5: Horse Race, Exact Solution'>Side-quest 22.5: Horse Race, Exact Solution</h3><ul>
<li>Chapter 17 also introduced a dice contest between two players, where each player rolls 50d6 and we must calculate the probability of either player winning if one player rolls a 1 and the other player rolls a 6 on the first turn. In Challenge 17.3, we performed a Monte Carlo simulation to get an estimate of this probability and noted that an exact solution would be challenging.</li>
<li>We can model the horse race as a finite state machine, where the state is the difference between the two players’ scores (some states may be negative numbers!). The initial state is 5 (because one player has 6 points and the other player has 1 point, after the first roll). Each subsequent roll may change the state anywhere from +5 to −5, depending on the rolls (there are only 36 different results for each turn, and you should be able to calculate the prob- ability of each state transition easily enough at this point). At any point, being in a positive state means the player who rolled the initial 6 is winning; being in a negative state means the player who rolled the initial 1 is winning; and being in state 0 means the players are currently tied.</li>
<li>Since there are 50 turns (and the first turn, by the problem statement, puts us in state 5), the states after all 50 turns ranges from −240 to 250, for a total of 491 states. That is very possible to do in a spreadsheet, but tedious. Instead, let’s take a simpler case: a ten-turn game (which has states ranging from −40 to 50, for 91 states total). Using a Markov chain, determine the probability of the player who initially rolled 6 winning the game (i.e., the probability of ending in <i>any/positive-numbered state) after each turn. Graph the win prob- ability on the /y</i>-axis and the turn number on the <i>x</i>-axis, from turns 1 through 10 (turn 1, since it is fixed in state 5, should be a probability 1 of winning).</li>
<li>What pattern do you see emerging, from the graph? How would you expect the probability to change for a 50-turn game, or a 100-turn game, or a 500-turn game?</li>
</ul><br>
<h3 id='Side-quest 22.6: Two in a Row'>Side-quest 22.6: Two in a Row</h3><ul>
<li>A deck containing three black cards and three red cards is shuffled randomly, and the cards are dealt out in order. What is the probability of flipping at least two black cards in a row?</li>
<li>This can be done by brute force, but if it were much larger (say, if looking at an entire deck with 26 black and 26 red cards, and looking for a string of at least 5 in a row), it would become quite unwieldy, and trying to compute it by conventional methods seems like it should be easy until you try, at which point it starts to feel impossible. However, this can be modeled as a state machine!</li>
<li>Each state consists of /three/numbers rather than just one. The first number is the number of black cards remaining in the deck. The second number is the number of red cards remaining in the deck. The third number is the number of black cards in a row, currently. The initial state is (3, 3, 0).</li>
<li>With the first card drawn, we can draw either a black card (probability 3/6) transitioning to state (2, 3, 1) or a red card (probability 3/6) transition- ing to state (3, 2, 0). State (2, 3, 1) has a probability 2/5 of drawing a second black card, transitioning to (1, 3, 2) which is a final state, because no matter what is drawn after that, we know that we have encountered a run of two black cards in a row; there is also a probability 3/5 of drawing a red card after the initial black card instead, transitioning to state (2, 2, 0). The partial state diagram looks like the following.</li>
</ul><br>
<p><img src='(ch%2022)%20Infinite%20Probability/D74F3182-1782-4076-9900-5EF2023D55FC.png'></p><ul>
<li>You could extend this state diagram to include all possibilities. Then, for each final state that includes a run of at least two black cards, multiply all of the probabilities to get there (in this case, the probability of reaching state (1, 3, 2) is 3/6 * 2/5 = 1/5). Add the probabilities of all such final states and that is the probability of encountering a run of at least two cards.</li>
<li>How would you model this in a spreadsheet? The first number is between 0 and 3. The second number is between 0 and 3. The third number is between 0 and 2. This gives a maximum of 4 * 4 * 3 = 192 states. You could simply number the states as a single three-digit number (the initial state would be 330). For greater efficiency, if the three numbers are (<i>a</i>, <i>b</i>, <i>c</i>), you could have that correspond to the state number 12/a/+ 3/b/+ <i>c</i>, which would be unique for any valid combination of the numbers. (We could get even more efficient, since some states like (3, 3, 3) are impossible, but the number is small enough that we can ignore that detail for now.) As with the <i>Risk/case study in this chapter, each state (/a</i>, <i>b</i>, 2) for all numbers <i>a/and /b/is considered a positive final state, and we can compute the probability of reaching that state by going back to the previous (/a/+ 1, /b</i>, 1). Any state (<i>m</i>, <i>n</i>, 1) can be reached from (<i>m/+ 1, /n</i>, 0). Any state (<i>x</i>, <i>y</i>, 0) can be reached from either (<i>x</i>, <i>y/+ 1, 0) or (/x</i>, <i>y/+ 1, 1). Going recursively, you get back to (3, 3, 0) eventually through all paths. By multi- plying each state’s probability by the probability of transitioning there from a previous state—the probability of drawing a black card from state (/black</i>, <i>red</i>, <i>streak</i>) is black/(black+red), and the probability of drawing a red card is red/(black+red)—you should be able to get the probability of transitioning at some point to any given state. Add up all the probability of reaching all final states with /streak/= 2 and that gives you the probability you’re looking for.</li>
<li><b>Ultimate challenge (requires programming)</b>: A gambler sits down at a /Blackjack/table, which is dealing cards from an eight-deck shoe; this means the cards are being dealt from a collection of 32 Aces, 128 “tens” (10, Jack, Queen or King), and 256 “spots” (number cards 2 through 9). Assume a fair, random shuffle, and assume that the entire shoe is dealt through. What is the probability that at some point, the player sees at least one run of at least 10 “tens” dealt in a row?</li>
<li>(An equivalent problem, since each card is either a “ten” or it isn’t: imagine a string of 416 computer <b>bits</b>—ones or zeros5; 128 of these bits are ones. The remaining 288 bits are zeroes. Aside from that constraint, they are ordered randomly. What is the probability that the entire string contains at least one section of 10 or more ones in a row?)</li>
<li>This is equivalent to the earlier problem, but instead of an initial state of (3, 3, 0), you have an initial state of (128, 256, 0) and final states have a run of 10 instead of 2. There are about 400,000 potential states here, too many to enumerate with a hand-drawn state diagram. Even populating a spreadsheet can be unwieldy for this, unless you can develop some kind of trick to populate cells in an automated fashion. However, it can be quite feasible to solve this problem in a programming language, using a recursive function call.</li>
</ul><br>
<br>
<br>
<br>
<br>
<p><span class='hashtag'><span class='hashtag-marker marker'>#</span>_book<span class='hashtag-separator-marker marker'>/</span>Art<span class='hashtag-separator-marker marker'>/</span>game<span class='hashtag-separator-marker marker'>/</span>GameBalance<span class='hashtag-separator-marker marker'>/</span>Math</span></p>
        </div>
    </body>
</html>
